{% extends 'base.html' %}

{% block content %}
<div class="vault-wrapper">
    <div class="vault-card">

        <h2 class="vault-title">Secure Vault</h2>

        <div class="vault-search">
            <input type="text" placeholder="Search documents..." />
        </div>

        <!-- üìÇ FILE LIST -->
        <div class="vault-list">
            {% if files %}
                {% for file in files %}
                <div class="vault-item">
                    <span class="vault-doc">
                        üìÑ {{ file.original_filename }}
                    </span>

                    <div class="vault-actions">

    <!-- Download -->
    <a href="{% url 'download_file' file.id %}">
        <button class="vault-btn" type="button">
            Download
        </button>
    </a>

    <!-- Delete -->
    <form method="POST"
          action="{% url 'delete_file' file.id %}"
          style="display:inline;">
        {% csrf_token %}
        <button type="submit"
                class="vault-btn delete-btn"
                onclick="return confirm('Are you sure you want to delete this file?');">
            Delete
        </button>
    </form>

</div>


                </div>
                {% endfor %}
            {% else %}
                <p>No files uploaded yet.</p>
            {% endif %}
        </div>

        <!-- üîê Upload Section -->
        <div class="vault-upload">
            <form method="POST"
                  action="{% url 'upload_file' %}"
                  enctype="multipart/form-data">
                {% csrf_token %}

                <label class="upload-label" for="file-input">
                    Add File
                </label>

                <input
                    id="file-input"
                    type="file"
                    name="file"
                    hidden
                    required
                >

                <input
                    type="password"
                    name="password"
                    placeholder="Confirm your account password"
                    class="password-input"
                    autocomplete="current-password"
                    required
                >

                <button type="submit" class="upload-btn">
                    Upload & Encrypt
                </button>
            </form>
        </div>
           <div class="vault-upload">
            <a href="{% url 'recycle_bin' %}">
                <button class="vault-btn">
                    üóëÔ∏è Recycle Bin
                </button>
            </a>
        </div>
    </div>
</div>
{% endblock %}
